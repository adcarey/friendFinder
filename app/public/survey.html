<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Friend Survey!</title>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
</head>
<body>

	<div class="container">
		
		<div class=row>
			<h2>Questions to find friendship!</h2>
			<h3>Tell me about yourself</h3>
			<h4>Name (Required)</h4>
		<input type="text" name="" id="name" class = "form-control" required>

			<h4>Add a link to your photo! (Required)</h4>
			<input type = "text" name="" id="photo" class ="form-control" required>

			<br>

			<h3>Question 1</h3>
			<h4>Are you always looking for adventure?</h4>
			<select data-placeholder="" class="chosen-select" id="q1">
				<option value=""></option>
				<option value="1">1 Strongly Disagree</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 Strongly Agree</option>
			</select>


			 <h3>Question 2</h3>
			<h4>Do you rely on intstinct or imagination?</h4>
			<select data-placeholder="" class="chosen-select" id="q2">
				<option value=""></option>
				<option value="1">1 Strongly Disagree</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 Strongly Agree</option>
			</select>


			<h3>Question 3</h3>
			<h4>Do you stay composed under pressure?</h4>
			<select data-placeholder="" class="chosen-select" id="q3">
				<option value=""></option>
				<option value="1">1 Strongly Disagree</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 Strongly Agree</option>
			</select>


			<h3>Question 4</h3>
			<h4>Do you like spending time outdoors?</h4>
			<select data-placeholder="" class="chosen-select" id="q4">
				<option value=""></option>
				<option value="1">1 Strongly Disagree</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 Strongly Agree</option>
			</select>


			<h3>Question 5</h3>
			<h4>Is it easy for people to upset you?</h4>
			<select data-placeholder="" class="chosen-select" id="q5">
				<option value=""></option>
				<option value="1">1 Strongly Disagree</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 Strongly Agree</option>
			</select>


			<h3>Question 6</h3>
			<h4>You do not relate to other people's feelings?</h4>
			<select data-placeholder="" class="chosen-select" id="q6">
				<option value=""></option>
				<option value="1">1 Strongly Disagree</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 Strongly Agree</option>
			</select>


			<h3>Question 7</h3>
			<h4>You prefer to tell the truth even when others feelings are at stake?</h4>
			<select data-placeholder="" class="chosen-select" id="q7">
				<option value=""></option>
				<option value="1">1 Strongly Disagree</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 Strongly Agree</option>
			</select>


			<h3>Question 8</h3>
			<h4>You prefer dreams to reality?</h4>
			<select data-placeholder="" class="chosen-select" id="q8">
				<option value=""></option>
				<option value="1">1 Strongly Disagree</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 Strongly Agree</option>
			</select>


			<h3>Question 9</h3>
			<h4>You listen to people when they are upset?</h4>
			<select data-placeholder="" class="chosen-select" id="q9">
				<option value=""></option>
				<option value="1">1 Strongly Disagree</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 Strongly Agree</option>
			</select>


			<h3>Question 10</h3>
			<h4>You prefer to stay home then go out?</h4>
			<select data-placeholder="" class="chosen-select" id="q10">
				<option value=""></option>
				<option value="1">1 Strongly Disagree</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5 Strongly Agree</option>
			</select>
			<br>
			<button type="submit" class="btn btn-primary btn-lg" id="submit">Submit</button>
		</div>
		<hr>
	    <footer class="footer">
	      <div class="container">
		  <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/adcarey/friendFinder">GitHub Repo</a></p>
	      </div>
	    </footer>

	    <div id="resultsModal" class="modal fade" role="dialog">
	  <div class="modal-dialog">

	    
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        <h2 class="modal-title"><strong>Best Match</strong></h2>
	      </div>
	      <div class="modal-body">
	        <h2 id="matchName"></h2>
	        <img id="matchImg" src="https://consortiumnews.com/wp-content/uploads/2016/03/768x432-2014-tom-brady.jpg" alt="">
	      </div>
	      <div class="modal-footer">
	        <button type="button" id= "restart" class="btn btn-default" data-dismiss="modal">Close</button>
	      </div>
	    </div>

	  </div>
	</div>

	</div>

	 <script type="text/javascript">


    $("#submit").on("click", function(){

    	// Form validation
    	function validateForm() {
		  var isValid = true;
		  $('.form-control').each(function() {
		    if ( $(this).val() === '' )
		        isValid = false;
		  });

		  $('.chosen-select').each(function() {

		  	if( $(this).val() === "")
		  		isValid = false
		  })
		  return isValid;
		}

		// If all required fields are filled
		if (validateForm() == true)
		{
			// Create an object for the user's data
	    	var userData = {
	    		name: $("#name").val(),
	    		photo: $("#photo").val(),
	    		scores:[$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val() ]
	    	}


	    	// Grab the URL of the website
	    	var currentURL = window.location.origin;

	    	// AJAX post the data to the friends API. 
	    	$.post(currentURL + "/api/friends", userData, function(data){
	    		console.log(data);
	    		console.log(userData);

	    
	    		$("#matchName").text(data.name);
	    		$('#matchImg').attr("src", data.photo);
		  
		    	$("#resultsModal").modal('toggle');

	    	});
		}
		else
		{
			alert("Please fill out all fields before submitting!");
		}
    	
    	return false;
    });

    $("#restart").on("click", function(){
    	 window.location.reload()

    });


  </script>


</body>
</html>